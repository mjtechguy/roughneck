---
# =============================================================================
# Setup Wizard Role
# =============================================================================
# Installs the interactive setup wizard for configuring AI coding assistants

- name: Install uv package manager
  ansible.builtin.shell: curl -LsSf https://astral.sh/uv/install.sh | sh
  args:
    creates: /home/{{ roughneck_user }}/.local/bin/uv
  become: true
  become_user: "{{ roughneck_user }}"

- name: Copy setup wizard to projects
  ansible.builtin.copy:
    src: roughneck-setup
    dest: /home/{{ roughneck_user }}/projects/roughneck-setup
    owner: "{{ roughneck_user }}"
    group: "{{ roughneck_user }}"
    mode: "0755"

- name: Symlink roughneck-setup to PATH
  ansible.builtin.file:
    src: /home/{{ roughneck_user }}/projects/roughneck-setup
    dest: /usr/local/bin/roughneck-setup
    state: link

- name: Display setup wizard info
  ansible.builtin.debug:
    msg:
      - "Setup wizard installed at ~/projects/roughneck-setup"
      - "Run 'roughneck-setup' after logging in to configure AI assistants"
